CREATE TABLE k4_users (
	id			INT NOT NULL AUTO_INCREMENT,
	name			VARCHAR(20) NOT NULL DEFAULT '',
	email			VARCHAR(255) NOT NULL DEFAULT '',
	pass			VARCHAR(32) NOT NULL DEFAULT '',
	priv_key		VARCHAR(32) NOT NULL DEFAULT '',
	created			INT NOT NULL DEFAULT 0,
	login			INT NOT NULL DEFAULT 0,
	seen			INT NOT NULL DEFAULT 0,
	last_seen		INT NOT NULL DEFAULT 0,
	perms			INT NOT NULL DEFAULT 2,
	invisible		INTEGER	UNSIGNED NOT NULL DEFAULT 0,

	PRIMARY KEY(id)
);
CREATE INDEX name ON k4_users (name);

CREATE TABLE k4_userinfo (
	user_id			INT NOT NULL DEFAULT 0,
	fullname		VARCHAR(100) NOT NULL DEFAULT '',
	num_posts		INT NOT NULL DEFAULT 0,
	timezone		decimal(5,2) NOT NULL DEFAULT 0,
	address			VARCHAR(255) NOT NULL DEFAULT '',
	occupation		VARCHAR(100) NOT NULL DEFAULT '',
	interests		VARCHAR(100) NOT NULL DEFAULT '',
	biography		VARCHAR(255) NOT NULL DEFAULT '',
	icq			VARCHAR(255) NOT NULL DEFAULT '',
	aim			VARCHAR(255) NOT NULL DEFAULT '',
	msn			VARCHAR(255) NOT NULL DEFAULT '',
	yahoo			VARCHAR(255) NOT NULL DEFAULT '',
	jabber			VARCHAR(255) NOT NULL DEFAULT '',
	avatar			VARCHAR(100) NOT NULL DEFAULT '',
	signature		VARCHAR(255) NOT NULL DEFAULT '',
	birthday		VARCHAR(10) NOT NULL DEFAULT '',
	homepage		VARCHAR(255) NOT NULL DEFAULT '',
	language		VARCHAR(20) NOT NULL DEFAULT 'english',
	styleset		VARCHAR(100) NOT NULL DEFAULT 'Descent',
	imgset			VARCHAR(100) NOT NULL DEFAULT 'Descent',
	tplset			VARCHAR(100) NOT NULL DEFAULT 'Descent',
	banned			INTEGER	UNSIGNED NOT NULL DEFAULT 0,
	topic_display		INTEGER	UNSIGNED NOT NULL DEFAULT 0,
	lastpage		VARCHAR(100) NOT NULL DEFAULT '',
	notify_pm		INTEGER DEFAULT 1 NOT NULL,
	popup_pm		INTEGER DEFAULT 0 NOT NULL,
	viewflash		INTEGER DEFAULT 1 NOT NULL,
	viewsmilies		INTEGER DEFAULT 1 NOT NULL,
	viewsigs		INTEGER DEFAULT 1 NOT NULL,
	viewavatars		INTEGER DEFAULT 1 NOT NULL,
	viewcensors		INTEGER DEFAULT 1 NOT NULL,
	attachsig		INTEGER DEFAULT 1 NOT NULL
);
CREATE INDEX user_id ON k4_userinfo (user_id);

CREATE TABLE k4_sessions (
	id			VARCHAR(32) NOT NULL DEFAULT '',
	seen			INT NOT NULL DEFAULT 0,
	name			VARCHAR(16) NOT NULL DEFAULT '',
	user_id			INT NOT NULL DEFAULT 0,
	data			TEXT,

	location_file		VARCHAR(25) NOT NULL DEFAULT '',
	location_act		VARCHAR(25) NOT NULL DEFAULT '',
	location_id		INT NOT NULL DEFAULT 0,

	PRIMARY KEY(id)
);

CREATE TABLE k4_settinggroup (
	id			INT NOT NULL AUTO_INCREMENT,
	title			VARCHAR(100) NOT NULL,
	displayorder		INT NOT NULL DEFAULT 0,

	PRIMARY KEY (id)
);
CREATE TABLE k4_setting (
	id			INT NOT NULL AUTO_INCREMENT,
	settinggroupid		INT NOT NULL DEFAULT 0,
	varname			VARCHAR(100) NOT NULL,
	value			MEDIUMTEXT NOT NULL,
	optioncode		CHAR(20) NOT NULL DEFAULT 'text',
	displayorder		INT NOT NULL DEFAULT 0,

	PRIMARY KEY (id)
);
CREATE INDEX varname ON k4_setting (varname);

CREATE TABLE k4_styles (
	id			INT NOT NULL AUTO_INCREMENT,
	name			VARCHAR(100) NOT NULL DEFAULT '',
	description		VARCHAR(255) NOT NULL DEFAULT '',

	PRIMARY KEY(id)
);
CREATE TABLE k4_css (
	id			INT NOT NULL AUTO_INCREMENT,
	style_id		INT NOT NULL DEFAULT 1,
	name			VARCHAR(100) NOT NULL DEFAULT '',
	properties		TEXT,
	description		VARCHAR(255) NOT NULL DEFAULT '',
	prev_name		VARCHAR(100) NOT NULL DEFAULT '',
	prev_properties		TEXT,

	PRIMARY KEY(id)
);
CREATE TABLE k4_information (
	id			INT NOT NULL AUTO_INCREMENT,
	parent_id		INT NOT NULL DEFAULT 0,
	row_left		INT NOT NULL DEFAULT 1,
	row_right		INT NOT NULL DEFAULT 2,
	row_type		INT NOT NULL DEFAULT 1,
	row_level		INT NOT NULL DEFAULT 1,
	row_order		INT NOT NULL DEFAULT 1,
	name			VARCHAR(255) NOT NULL DEFAULT '',
	created			INT NOT NULL DEFAULT 0,

	PRIMARY KEY(id)
);
CREATE INDEX row_left ON k4_information (row_left);
CREATE INDEX row_right ON k4_information (row_right);

CREATE TABLE k4_categories (
	category_id		INT NOT NULL DEFAULT 0,
	description		VARCHAR(255) NOT NULL DEFAULT '',
	suspended		INT NOT NULL DEFAULT 0,
	archive			INT NOT NULL DEFAULT 0,
	moderating_groups	TEXT,
	moderating_users	TEXT
);
CREATE INDEX category_id ON k4_categories (category_id);

CREATE TABLE k4_forums (
	forum_id		INT NOT NULL DEFAULT 0,
	category_id		INT NOT NULL DEFAULT 0,
	description		VARCHAR(255) NOT NULL DEFAULT '',
	suspended		INT NOT NULL DEFAULT 0,
	archive			INT NOT NULL DEFAULT 0,
	subforums		INT NOT NULL DEFAULT 0,
	
	is_forum		INT NOT NULL DEFAULT 1,
	is_tracker		INT NOT NULL DEFAULT 0,
	is_link			INT NOT NULL DEFAULT 0,
	link_redirects		INT NOT NULL DEFAULT 0,
	link_show_redirects	INT NOT NULL DEFAULT 1,
	link_href		VARCHAR(255) NOT NULL DEFAULT '',
	
	moderating_groups	TEXT,
	moderating_users	TEXT,

	pass			VARCHAR(32) NOT NULL DEFAULT '',
	
	topics			INT NOT NULL DEFAULT 0,
	replies			INT NOT NULL DEFAULT 0,
	posts			INT NOT NULL DEFAULT 0,

	topic_created		INT NOT NULL DEFAULT 0,
	topic_name		VARCHAR(32) NOT NULL DEFAULT '',
	topic_uname		VARCHAR(16) NOT NULL DEFAULT '',
	topic_id		INT NOT NULL DEFAULT 0,
	topic_uid		INT NOT NULL DEFAULT 0,

	post_created		INT NOT NULL DEFAULT 0,
	post_name		VARCHAR(32) NOT NULL DEFAULT '',
	post_uname		VARCHAR(16) NOT NULL DEFAULT '',
	post_id			INT NOT NULL DEFAULT 0,
	post_uid		INT NOT NULL DEFAULT 0,

	topicsperpage		INT NOT NULL DEFAULT 50,
	postsperpage		INT NOT NULL DEFAULT 9,
	maxpolloptions		INT NOT NULL DEFAULT 13,

	num_viewing		INT NOT NULL DEFAULT 0,
	
	allowedhtml		VARCHAR(255) NOT NULL DEFAULT 'br, a, pre, ul, li, ol, p',

	forum_rules		TEXT,
	special_message		TEXT
);
CREATE INDEX forum_id ON k4_forums (forum_id);

CREATE TABLE k4_topics (
	topic_id		INT NOT NULL DEFAULT 0,
	forum_id		INT NOT NULL DEFAULT 0,
	category_id		INT NOT NULL DEFAULT 0,

	edited_time		INT NOT NULL DEFAULT 0,
	edited_username		VARCHAR(16) NOT NULL DEFAULT '',
	edited_userid		INT NOT NULL DEFAULT 0,

	ratings_sum		INTEGER	UNSIGNED NOT NULL DEFAULT 0,
	ratings_num		INTEGER	UNSIGNED NOT NULL DEFAULT 0,

	disable_html		INT NOT NULL DEFAULT 1,
	disable_bbcode		INT NOT NULL DEFAULT 0,
	disable_smilies		INT NOT NULL DEFAULT 0,
	disable_sig		INT NOT NULL DEFAULT 0,
	disable_areply		INT NOT NULL DEFAULT 1,
	disable_aurls		INT NOT NULL DEFAULT 0,
	
	topic_locked		INT NOT NULL DEFAULT 0,
	description		VARCHAR(255) NOT NULL DEFAULT '',
	body_text		TEXT,
	
	poster_name		VARCHAR(16) NOT NULL DEFAULT '',
	poster_id		INT NOT NULL DEFAULT 0,
	
	reply_time		INT NOT NULL DEFAULT 0,
	reply_uname		VARCHAR(16) NOT NULL DEFAULT '',
	reply_id		INT NOT NULL DEFAULT 0,
	reply_uid		INT NOT NULL DEFAULT 0,
	
	poll			INT NOT NULL DEFAULT 0,
	poll_question		VARCHAR(255) NOT NULL DEFAULT '',
	poll_id			INT NOT NULL DEFAULT 0,
	poll_votes		INT NOT NULL DEFAULT 0,
	
	views			INT NOT NULL DEFAULT 0
);
CREATE INDEX topic_id ON k4_topics (topic_id);

CREATE TABLE k4_replies (
	reply_id		INT NOT NULL DEFAULT 0,
	topic_id		INT NOT NULL DEFAULT 0,
	forum_id		INT NOT NULL DEFAULT 0,
	category_id		INT NOT NULL DEFAULT 0,
	
	body_text		TEXT,
	poster_name		VARCHAR(16) NOT NULL DEFAULT '',
	poster_id		INT NOT NULL DEFAULT 0,

	edited_time		INT NOT NULL DEFAULT 0,
	edited_username		VARCHAR(16) NOT NULL DEFAULT '',
	edited_userid		INT NOT NULL DEFAULT 0
);
CREATE INDEX reply_id ON k4_replies (reply_id);

CREATE TABLE k4_polloptions (
	id			INT NOT NULL AUTO_INCREMENT,
	topic_id		INT NOT NULL DEFAULT 0,
	name			VARCHAR(255) NOT NULL DEFAULT '',
	color	 		VARCHAR(24) NOT NULL DEFAULT '',
	
	PRIMARY KEY(id)	
);
CREATE TABLE k4_pollvotes (
	id			INT NOT NULL AUTO_INCREMENT,
	topic_id		INT NOT NULL DEFAULT 0,
	option_id 		INT NOT NULL DEFAULT 0,
	user_id 		INT NOT NULL DEFAULT 0,
	user_name		VARCHAR(16) NOT NULL DEFAULT '',
	
	PRIMARY KEY(id)	
);
CREATE TABLE k4_ratings (
	user_id			INT,
	topic_id		INT NOT NULL DEFAULT 0,
	rating			INT NOT NULL DEFAULT 0
);
CREATE TABLE k4_maps (
	id			INT NOT NULL AUTO_INCREMENT,
	row_left		INT NOT NULL DEFAULT 0,
	row_right		INT NOT NULL DEFAULT 0,
	row_level		INT NOT NULL DEFAULT 1,
	name			VARCHAR(255) NOT NULL DEFAULT '',
	varname			CHAR(30) NOT NULL DEFAULT '',
	value			VARCHAR(255) NOT NULL DEFAULT '',
	
	is_global		INT NOT NULL DEFAULT 0,
	category_id		INT NOT NULL DEFAULT 0,
	forum_id		INT NOT NULL DEFAULT 0,
	user_id			INT NOT NULL DEFAULT 0,
	group_id		INT NOT NULL DEFAULT 0,
	
	can_view		INT NOT NULL DEFAULT 1,
	can_add			INT NOT NULL DEFAULT 2,
	can_edit		INT NOT NULL DEFAULT 2,
	can_del			INT NOT NULL DEFAULT 7,
	
	inherit			INT NOT NULL DEFAULT 1,

	PRIMARY KEY(id)
);
CREATE INDEX row_left2 ON k4_maps(row_left);
CREATE INDEX row_right2 ON k4_maps(row_right);

CREATE TABLE k4_datastore (
	varname			CHAR(30) NOT NULL DEFAULT '',
	data			TEXT,

	PRIMARY KEY(varname)
);
CREATE TABLE k4_posticons (
	id		INT NOT NULL AUTO_INCREMENT,
	description	VARCHAR(100) NOT NULL DEFAULT '',
	image		VARCHAR(100) NOT NULL DEFAULT '',

	PRIMARY KEY(id)
);

CREATE TABLE k4_emoticons (
	id 		INT NOT NULL AUTO_INCREMENT,
	typed 		VARCHAR(32) NOT NULL DEFAULT '',
	description	VARCHAR(50) NOT NULL DEFAULT '',
	image 		VARCHAR(128) NOT NULL DEFAULT '',
	clickable 	INT NOT NULL DEFAULT 0,
	
	PRIMARY KEY(id)
);